##############################################################
#			READ MORE: http://slurm.schedmd.com/slurm.conf.html
#
#
##############################################################

ControlMachine={{ ansible_hostname }}
ClusterName=cluster

AuthType=auth/munge

CryptoType=crypto/munge

MpiDefault=none
CheckpointType=checkpoint/blcr

ProctrackType=proctrack/pgid

CacheGroups=0
FirstJobId=2230000
ReturnToService=1
MaxJobCount=30000
PropagateResourceLimitsExcept=MEMLOCK,RLIMIT_AS,RLIMIT_CPU,RLIMIT_NPROC,RLIMIT_CORE,RLIMIT_DATA,RLIMIT_RSS,STACK
EnforcePartLimits=YES

SlurmctldPidFile=/var/run/slurmctld.pid
SlurmctldPort=6817
SlurmdPidFile=/var/run/slurmd.pid
SlurmdPort=6818
SlurmUser=root

StateSaveLocation=/var/spool
SlurmdSpoolDir=/var/spool/slurmd
SwitchType=switch/none

InactiveLimit=0
KillWait=30

MinJobAge=300

SlurmctldTimeout=120
SlurmdTimeout=300

Waittime=0

FastSchedule=1

SchedulerType=sched/backfill
SchedulerPort=7321
SelectType=select/linear
SchedulerParameters = bf_max_job_user=100,bf_continue,bf_interval=95,bf_resolution=180,max_job_bf=400

AccountingStoreJobComment=YES
AccountingStorageEnforce=limits,qos
AccountingStorageType=accounting_storage/slurmdbd
AccountingStorageLoc=/var/log/slurm/accounting
#AccountingStorageHost=slurm
JobCompLoc=/var/log/slurm/job_completions
JobCompType=jobcomp/filetxt

JobAcctGatherFrequency=30
JobAcctGatherType=jobacct_gather/none
SlurmctldDebug=4
SlurmdLogFile=/var/log/slurm/slurmd
SlurmctldLogFile=/var/log/slurm/slurmctl
SlurmdDebug=4

# Ignore the different slurm.conf
DebugFlags=NO_CONF_HASH

# COMPUTE NODES
NodeName=JGNODE[1-4] CPUs=1 State=UNKNOWN
PartitionName=CLUSTER Default=yes State=UP nodes=JGNODE[1-4]
